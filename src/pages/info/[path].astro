---
import Layout from '@/layouts/Layout.astro'
import { getInfo } from '@/lib/index.ts'
import DriveIcon from '@/components/icons/Drive.astro'
import WaveDown from '@/components/wave/WaveDown.astro'
import WaveUp from '@/components/wave/WaveUp.astro'
import BtnVisitar from '@/components/btn/BtnVisitar.astro'
import BtnGithub from '@/components/btn/BtnGithub.astro'
import BtnAtras from '@/components/btn/BtnAtras.astro'

const { path } = Astro.params

if (path == null) {
  return Astro.redirect('/')
}

const info = getInfo(path)

if (info == null) {
  return Astro.redirect('/')
}

const { titulo, img, link, github, drive, descripcion, aprendisaje } = info
---

<Layout title={`${titulo} - Nicolás Meléndez`}>
  <BtnAtras />
  <section
    class='bg-[#E3F7EB] flex flex-col items-start pb-12 md:pb-0 gap-y-10 xlbig:flex-row justify-center gap-x-10 pt-5 px-5 md:px-14'
  >
    <div class='space-y-4 w-full xlbig:max-w-[600px] xlmax:max-w-[700px]'>
      <h2
        class='text-center lg:text-left text-3xl xl:text-4xl font-bold text-[#0DBC5C] text-balance'
      >
        {titulo}
      </h2>
      <p class='text-pretty pt-3 text-sm sm:text-base'>
        {descripcion}
      </p>
      <div
        class='flex justify-center sm:justify-start items-center gap-x-4 pt-3 flex-wrap'
      >
        {link && <BtnVisitar url={link} />}
        {github && <BtnGithub repository={github} />}
        {
          drive && (
            <a
              target='_blank'
              rel='noopener noreferrer'
              href={drive}
              class='flex items-center gap-x-2 text-white bg-[#4285F4] hover:bg-[#4285F4]/90 focus:ring-4 focus:outline-none focus:ring-[#4285F4]/50 font-medium rounded-full text-xs py-2 px-3 shadow-md text-center'
            >
              <DriveIcon />
              Recursos
            </a>
          )
        }
      </div>
    </div>

    <div class='flex flex-col gap-y-8'>
      <picture class='rounded-lg'>
        <img
          class='w-full xlbig:max-w-[500px] xlmax:max-w-[700px] object-cover rounded-lg shadow-lg'
          src={img}
          alt={`Imagen de ${titulo}`}
        />
      </picture>
    </div>
  </section>
  <WaveUp />
  <section
    class='flex flex-col items-center gap-y-4 pt-10 pb-20 px-5 md:px-14 bg-white'
  >
    <div class='space-y-8'>
      <h3 class='text-2xl font-bold text-center text-[#0DBC5C]'>
        <span class='pr-2 text-[#45745a] text-balance'>#</span>¿Qué aprendi?
      </h3>
      <p class='text-sm sm:text-base max-w-[1200px]'>
        {aprendisaje}
      </p>
    </div>
  </section>
</Layout>
<style>
  .sombra {
    filter: drop-shadow(-2px 0px 5px rgba(0, 0, 0, 0.1));
  }
</style>
